# Download the Dataset

:::warning

The previous Parquet export format v1 is now deprecated. See the [note](/docs/repository/download-dataset/#legacy-format-v1) below. Please follow the [instructions](/docs/repository/download-dataset/#export-v2-format) for the new v2 format.

:::

The entire Sourcify Database is exported continuously as [Parquet](https://github.com/apache/parquet-format) files, a modern columnar data format. Parquet files are compressed, efficient to query, and widely supported by data tools. ([Quick tutorial](https://www.datacamp.com/tutorial/apache-parquet)).

The export is hosted on Google Cloud Storage and accessible via an S3-compatible API at [export.sourcify.dev](https://export.sourcify.dev/). The export is based on the structure of the [Verifier Alliance database export](https://verifieralliance.org/docs/download).

## Export v2 Format

The export format has undergone a redesign to make it more efficient and easier to use. The v2 format follows these principles:

- New data is uploaded **daily**.
- Each database **table** is stored as a set of Parquet files.
- Files are partitioned by row ranges and **ordered** by `created_at` timestamps. Exception: the `sourcify_matches` table is ordered by `updated_at` timestamps, please see the [note](/docs/repository/download-dataset/#note-on-sourcify_matches) below.
- **Append-only** pattern: New data is added to new files; existing files are not modified. Only the most recent file for each table may be updated while it is not full yet.
- **File metadata** (checksums, sizes, timestamps) is provided directly by the Google Cloud Storage API.
- Files use **zstd compression** built into the Parquet format.

The dataset is available at [export.sourcify.dev](https://export.sourcify.dev/). All files of the v2 format are stored under the `v2/` prefix.

### Downloading and Syncing the Dataset

To download the entire dataset, you can run this command:

```bash
curl -s 'https://export.sourcify.dev/?prefix=v2/' | \
  grep -oP '(?<=<Key>)[^<]+' | \
  xargs -I {} curl -L -O https://export.sourcify.dev/{}
```

Alternatively, the [AWS CLI](https://docs.aws.amazon.com/cli/latest/userguide/getting-started-install.html#getting-started-install-instructions) makes it easy to download and keep the dataset in sync. The following command downloads the entire dataset on the first run, and on subsequent runs only downloads new or modified files:

```bash
aws s3 sync s3://sourcify-parquet-export/v2/ ./sourcify-dataset --endpoint-url https://storage.googleapis.com --no-sign-request
```

### Note on `sourcify_matches`

The `sourcify_matches` table is the only table that is not append-only and can be updated in the underlying Sourcify Database.
Therefore, its rows are ordered by `updated_at` timestamps when exported.
This means that rows with the same `id` may appear multiple times in the export files. 

When working with the `sourcify_matches` table from the export, please only consider the row with the most recent `updated_at` for each `id` as the current state. For importing the `sourcify_matches` parquet files into a database, an **upsert** operation should be used.


### Working with Parquet Files

Once downloaded, you can query and analyze Parquet files using various tools and libraries. Here are some popular options to give you a head start:

- [Pandas](https://pandas.pydata.org/docs/reference/api/pandas.read_parquet.html): Read data from Parquet files in Python
- [DuckDB](https://duckdb.org/docs/data/parquet): SQL queries on Parquet files
- [pg_parquet](https://github.com/CrunchyData/pg_parquet): PostgreSQL extension for copying Parquet data into a Postgres database

### API

For more fine-grained control, you can browse and download files directly using the S3-compatible Google Cloud Storage API:

**List all v2 files:**

```
https://export.sourcify.dev/?prefix=v2/
```

**List files for a specific table:**

```
https://export.sourcify.dev/?prefix=v2/verified_contracts/
```

**Download a specific file:**

```
https://export.sourcify.dev/v2/verified_contracts/verified_contracts_0_1000000.parquet
```

The API returns XML responses following the [Google Cloud Storage XML API specification](https://cloud.google.com/storage/docs/xml-api/get-bucket-list).

#### Available Tables

The Parquet export is available for all Sourcify Database tables: `sourcify_matches`, `verified_contracts`, `sources`, `compiled_contracts_sources`, `compiled_contracts`, `contract_deployments`, `contracts`, `code`, `compiled_contracts_signatures`, and `signatures`.

#### API Parameters

The most important parameters of the listing API are the following:

- **prefix**: Filter results to objects whose names begin with this prefix (e.g., `?prefix=v2/verified_contracts/`)
- **marker**: Start listing after this object name (for pagination)
- **max-keys**: Maximum number of objects to return in one response

The response from the listing API might be truncated, which is indicated by the `IsTruncated` field of the result. The `marker` parameter can be used to paginate through results by setting it to the `NextMarker` of the previous response.

Example with pagination:

```
https://export.sourcify.dev/?prefix=v2/verified_contracts/&max-keys=2&marker=v2/verified_contracts/verified_contracts_1000000_2000000.parquet
```

#### Metadata

The listing API provides detailed metadata for each of the Parquet files:

```xml
<ListBucketResult xmlns="http://doc.s3.amazonaws.com/2006-03-01">
  <Name>sourcify-parquet-export</Name>
  <Prefix>v2/</Prefix>
  <Marker/>
  <IsTruncated>false</IsTruncated>
  <Contents>
    <Key>v2/code/code_0_100000.parquet</Key>
    <Generation>1766065018286394</Generation>
    <MetaGeneration>1</MetaGeneration>
    <LastModified>2025-12-18T13:36:58.292Z</LastModified>
    <ETag>"ba687acd0afab85ed203a593479f0ce3"</ETag>
    <Size>101591414</Size>
  </Contents>
  <!-- More entries... -->
</ListBucketResult>
```

Most important fields:

- **Key**: The file path (download at `https://export.sourcify.dev/{Key}`)
- **LastModified**: When the file was last uploaded/modified
- **ETag**: MD5 hash of the file contents (use this to detect changes)
- **Size**: File size in bytes

## Legacy Format (v1)

:::warning Deprecation Notice

The v1 Parquet export format is **no longer updated**. All new data is only available in the v2 format. Please migrate to v2 for access to current data.

:::

The legacy v1 format files can still be accessed via non-prefixed paths in the bucket (e.g., `https://export.sourcify.dev/verified_contracts/verified_contracts_0_1000000.parquet`).

The v1 format used a JSON manifest file at [https://export.sourcify.dev/manifest.json](https://export.sourcify.dev/manifest.json) listing all available Parquet files. However, this format was not append-only. Each daily export regenerated all files, requiring users to download the entire dataset again after every update. The manifest also did not include checksums or modification timestamps, making it difficult to determine what changed between exports.

## Export Script

The source code of the export script is available at [https://github.com/sourcifyeth/parquet-export](https://github.com/sourcifyeth/parquet-export).
